<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Powered Summarizer & Chat with Research Paper (Gemini Flash)</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="/static/main.css" />
</head>
<body>
<div class="container py-4">
  <h1 class="mb-3">AI Powered Summarizer & Chat with Research Paper  (Gemini Flash)</h1>
<!--  <p class="text-muted">Paste an arXiv link or any paper URL, pick the explanation depth, and go.</p>-->
    <h4 class="text-muted">Paste an arXiv link paper URL, pick the explanation depth, and go...</h4>
    <p class="text-muted">Sample paper to analyze, copy-paste in search bar - https://arxiv.org/pdf/2407.06331</p>
  {% if error %}
    <div class="alert alert-danger">{{ error }}</div>
  {% endif %}

  <form method="POST" action="/summarize" class="card p-3 mb-4 shadow-sm">
    <div class="mb-3">
      <label for="paper_url" class="form-label">Paper URL</label>
      <input type="url" class="form-control" id="paper_url" name="paper_url" placeholder="https://arxiv.org/abs/xxxx.xxxxx" required value="{{ paper_url or '' }}" />
    </div>

    <div class="mb-3">
      <label class="form-label">Complexity</label>
      <div class="d-flex gap-3">
        <div class="form-check">
          <input class="form-check-input" type="radio" name="complexity" id="low" value="low" {% if level=='low' or not level %}checked{% endif %}>
          <label class="form-check-label" for="low">low (layman)</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="complexity" id="medium" value="medium" {% if level=='medium' %}checked{% endif %}>
          <label class="form-check-label" for="medium">medium (intuition)</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="complexity" id="high" value="high" {% if level=='high' %}checked{% endif %}>
          <label class="form-check-label" for="high">high (advanced)</label>
        </div>
      </div>
    </div>

    <button class="btn btn-primary" type="submit">Summarize</button>
  </form>

  {% if summary %}
  <div class="row g-4">
    <div class="col-lg-7">
      <div class="card shadow-sm">
        <div class="card-header d-flex justify-content-between align-items-center">
          <strong>Summary ({{ level }})</strong>
          <a class="btn btn-sm btn-outline-secondary" href="{{ paper_url }}" target="_blank">Open Source</a>
        </div>
        <div class="card-body">
          <div class="markdown" id="summary">{{ summary | safe }}</div>
        </div>
      </div>
    </div>

    <div class="col-lg-5">
      <div class="card shadow-sm h-100">
        <div class="card-header"><strong>Chat about this paper</strong></div>
        <div class="card-body d-flex flex-column">
          <div id="chat-log" class="chat-log mb-3"></div>
          <div class="input-group">
            <input id="chat-input" type="text" class="form-control" placeholder="Ask a question..." />
            <button id="chat-send" class="btn btn-primary">Send</button>
          </div>
          <div id="chat-status" class="form-text mt-2"></div>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</div>

<script src="/static/main.js"></script>
</body>
</html>